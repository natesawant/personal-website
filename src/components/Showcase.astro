---
interface Item {
  title: string;
  shortTitle?: string;
  team: string;
  shortTeam?: string;
  date: string;
  years: string;
  body: string;
  skills: string[];
}

interface Props {
  header: string;
  items: Item[];
  flipped?: boolean;
}

const { items, header, flipped } = Astro.props;

const uniqueYears = new Set(items.map((item) => item.years));
---

<div
  class="relative w-full min-h-screen bg-skyline bg-black p-4 sm:p-32 flex flex-col gap-5"
>
  <div class="absolute top-0 bottom-0 right-0 bg-red-700 w-1"></div>
  <h1
    class={` text-6xl sm:text-7xl uppercase ${flipped ? "text-right" : "text-left"}`}
  >
    {header}
  </h1>
  <div
    class={`flex flex-col-reverse ${flipped ? "sm:flex-row-reverse" : "sm:flex-row"}`}
  >
    <div class="flex flex-col">
      {
        items.map((item) => (
          <div class="flex flex-col bg-black p-4 sm:p-12 gap-5">
            <div>
              <h2 class="text-xl">
                {item.title} • {item.team}
              </h2>
              <h3 class="uppercase text-lg">{item.date}</h3>
            </div>
            <p class="text-lg">{item.body}</p>
            <div class="flex flex-row gap-3 text-nowrap text-base flex-wrap">
              {item.skills.map((skill) => (
                <div class="px-3 py-1 rounded-full bg-red-700 w-min">
                  {skill}
                </div>
              ))}
            </div>
          </div>
        ))
      }
    </div>
    <div></div>
    <div class="bg-black p-4 sm:p-12 flex flex-col gap-5 text-nowrap">
      {
        Array.from(uniqueYears.values()).map((year: string) => (
          <div>
            {year}
            <ul class="list-disc list-inside">
              {items
                .filter((item) => item.years === year)
                .map((item) => (
                  <li>
                    {item.shortTitle ? item.shortTitle : item.title} —{" "}
                    {item.shortTeam ? item.shortTeam : item.team}
                  </li>
                ))}
            </ul>
          </div>
        ))
      }
    </div>
  </div>
</div>
